# Проект: Tattoo Bot

## Обзор
Цель — создать умного бота/сервис, помогающего пользователям подбирать и заказывать эскизы татуировок: от идеи и референсов до генерации вариантов и записи к мастеру. Проект включает фронтенд (веб/моб), бекенд API, интеграции (оплата, уведомления), и ML/генерацию изображений (через внешние провайдеры или локальные модели).

## Цели
- Сократить время от идеи до готового эскиза и записи.
- Дать пользователю удобный путь: вдохновение → бриф → генерация → правки → заказ.
- Обеспечить мастерам поток лидов с полной бриф‑картой и готовыми вариантами.

## KPI
- Время от первого визита до первого сгенерированного эскиза < 5 минут.
- Конверсия из сессии в отправку брифа ≥ 20%.
- Конверсия из сгенерированного эскиза в заказ ≥ 7%.

## Персоны
1) Пользователь‑клиент: хочет вдохновение, быстрый результат, простые правки, прозрачную цену и запись.
2) Тату‑мастер: хочет релевантные лиды, полные брифы, возможность коммуникации и календарь.
3) Администратор: модерация контента, управление мастерами, тарифами, отчётность.

## Основные сценарии (User Stories)
- Как пользователь, я хочу пройти бриф с примером стиля/локации/размера/бюджета, чтобы бот понял мои предпочтения.
- Как пользователь, я хочу загрузить референсы и получить 3–6 вариантов эскиза, чтобы выбрать направление.
- Как пользователь, я хочу внести правки текстом (prompt) и отметить зоны/детали.
- Как пользователь, я хочу забронировать слот у мастера и оплатить предоплату онлайн.
- Как мастер, я хочу получать заявки с полным брифом, коммуницировать в чате и управлять слотами.
- Как админ, я хочу управлять мастерами, тарифами, верификацией профилей и модерацией генераций.

## Ключевые фичи (MVP)
- Онбординг и бриф с валидацией.
- Загрузка референсов (из файла/галереи/ссылок).
- Интеграция генерации изображений (например, Stable Diffusion / Midjourney API / OpenAI Images) через абстракцию провайдеров.
- Галерея результатов, лайк/дизлайк, версияция правок.
- Сохранение проекта и возобновление сессии.
- Простая запись к мастеру (заявка) и чат.
- Уведомления (email/Telegram) и webhooks.

## Расширения (после MVP)
- Календарь мастеров с реальным бронированием слотов.
- Прайс‑калькулятор.
- Маркетплейс мастеров с рейтингами, портфолио, отзывами.
- Платежи: предоплата и escrow.
- Генерация в высоком разрешении, апскейл, inpainting по зоне.

## Нефункциональные требования
- Производительность: генерация запроса → превью ≤ 30–60 сек (зависит от провайдера).
- Надёжность: ретраи и таймауты, идемпотентность генераций, хранение метаданных.
- Безопасность: аутентификация (OAuth/Email), защита файлов, модерация контента.
- Масштабирование: очереди задач на генерацию, горизонтальное масштабирование воркеров.

## Технологический стек (предложение)
- Frontend: Next.js/React, TypeScript, Tailwind, Uploadcare/Cloudflare Images.
- Backend: Node.js (NestJS/Express), TypeScript, PostgreSQL, Prisma, Redis/Queue.
- ML/Генерация: провайдеры через унифицированный интерфейс (плагинная архитектура).
- Инфраструктура: Vercel/Render/Fly.io + S3‑совместимое хранилище, CI/CD.

## Интеграции
- Email (Resend/Sendgrid) и Telegram Bot для уведомлений.
- Платежи (Stripe/ЮKassa) — MVP: только предоплата/инвойс.

## Маршрут MVP (Milestones)
1) Архитектурный каркас (моно/полирепо, базовые пакеты, линтеры, CI).
2) Бриф + загрузка референсов + генерация через одного провайдера.
3) Галерея результатов + правки + сохранение проекта.
4) Заявка мастеру + чат + уведомления.
5) Админ‑панель (минимально): модерация и список заявок.

## Риски и допущения
- Ограничения и стоимость генерации у внешних провайдеров.
- Необходима модерация контента.
- Юридические аспекты использования сгенерированных изображений.

## Критерии приёмки (MVP)
- Пользователь проходит бриф и получает ≥3 эскиза.
- Может запросить правки и получить новую версию.
- Может отправить заявку мастеру и получить подтверждение.
- Админ видит заявки и может заблокировать нежелательный контент.

## Примечания по данным
- Хранить метаданные генераций (prompt, seed, провайдер, версия, связи с референсами).
- Личные данные пользователей — согласно GDPR.


